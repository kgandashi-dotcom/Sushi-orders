<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>סושי מודרני</title>
<style>
:root {
  --accent:#7a2a2a;
  --accent-dark:#5e1b1b;
  --bg:#fff;
  --danger:#d9534f;
  --card-radius:12px;
  --shadow:0 4px 14px rgba(0,0,0,0.08);
}

*{box-sizing:border-box;margin:0;padding:0;font-family:Arial,Helvetica,sans-serif;}
body{background:linear-gradient(180deg,#f6f5f4,#efecec);color:#222;}
header{display:flex;justify-content:space-between;align-items:center;padding:12px;background:#fff;box-shadow:var(--shadow);border-radius:var(--card-radius);flex-wrap:wrap;}
.logo{width:50px;height:auto;border-radius:8px;}
.brand-left{display:flex;align-items:center;gap:10px;}
.brand-right{display:flex;align-items:center;gap:8px;flex-wrap:wrap;}
.menu-tabs{display:flex;gap:6px;flex-wrap:wrap;}
.tab{padding:6px 10px;border-radius:var(--card-radius);background:#fff;border:1px solid #eee;cursor:pointer;font-weight:700;transition:0.2s;}
.tab.active{background:var(--accent);color:#fff;border-color:var(--accent-dark);}
.tab:hover{background:var(--accent-dark);color:#fff;}
.btn{padding:8px 12px;border-radius:var(--card-radius);border:none;cursor:pointer;font-weight:700;transition:0.2s;}
.btn.primary{background:var(--accent);color:#fff;}
.btn.primary:hover{background:var(--accent-dark);}
.btn.secondary{background:#fff;color:var(--accent);border:1px solid #ddd;}
.btn.secondary:hover{background:var(--accent-dark);color:#fff;}
main{display:flex;gap:12px;flex-direction:column;padding:8px;}
#menu-area{display:flex;flex-direction:column;gap:12px;}
#side-area{display:flex;flex-direction:column;gap:12px;}
.category-container{display:flex;flex-direction:column;gap:10px;}
.roll-card{display:flex;justify-content:space-between;align-items:center;gap:10px;padding:12px;border-radius:var(--card-radius);background:var(--bg);box-shadow:var(--shadow);transition:0.2s;}
.roll-card:hover{transform:translateY(-2px);box-shadow:0 6px 18px rgba(0,0,0,0.12);}
.roll-card .info{flex:1 1 auto;}
.roll-card h3{margin-bottom:4px;color:var(--accent);font-size:1rem;}
.roll-card p{font-size:0.9rem;color:#444;}
.quantity-control{display:flex;align-items:center;gap:6px;}
.quantity-control button{width:34px;height:34px;border-radius:8px;border:none;background:#f0c0c0;color:var(--accent);font-weight:700;font-size:1.2rem;cursor:pointer;transition:0.2s;}
.quantity-control button:hover{background:var(--accent);color:#fff;}
.quantity-control input{width:50px;text-align:center;border:1px solid #ddd;padding:4px;border-radius:6px;}
.panel{background:#fff;padding:12px;border-radius:var(--card-radius);box-shadow:var(--shadow);}
.panel-title{font-weight:800;color:var(--accent);margin-bottom:8px;}
#order-summary{background:#fafafa;padding:10px;border-radius:8px;min-height:100px;white-space:pre-wrap;font-family:"Courier New",monospace;}
.note{font-size:0.85rem;color:#666;margin-top:4px;}
#messages{margin-top:6px;font-weight:700;color:var(--danger);}
@media(max-width:768px){main{flex-direction:column;}#side-area,#menu-area{width:100%;}.brand-right{justify-content:flex-start;}}
</style>
</head>
<body>
<header>
  <div class="brand-left">
    <img src="https://via.placeholder.com/50x50.png?text=🍣" alt="לוגו" class="logo">
    <h1>סושי מודרני</h1>
  </div>
  <div class="brand-right">
    <nav class="menu-tabs" role="navigation" aria-label="תפריט קטגוריות">
      <button class="tab active" data-target="insideout-rolls">Inside-out</button>
      <button class="tab" data-target="maki-rolls">Maki</button>
      <button class="tab" data-target="onigiri-rolls">Onigiri</button>
      <button class="tab" data-target="poke-rolls">Poke</button>
      <button class="tab" data-target="sauces-container">רטבים</button>
    </nav>
    <div class="user-actions">
      <button id="profile-btn" class="btn secondary">פרופיל</button>
      <button id="auth-btn" class="btn primary">התחבר</button>
    </div>
  </div>
</header>

<main>
  <section id="menu-area">
    <div id="insideout-rolls" class="category-container"></div>
    <div id="maki-rolls" class="category-container" style="display:none;"></div>
    <div id="onigiri-rolls" class="category-container" style="display:none;"></div>
    <div id="poke-rolls" class="category-container" style="display:none;"></div>
  </section>

  <aside id="side-area">
    <section class="panel">
      <div class="panel-title">רטבים</div>
      <div id="sauces-container" class="category-container"></div>
      <p class="note">כל רול מקבל 2 רטבים חינם. מעבר לכך 3₪ לכל רוטב.</p>
    </section>

    <section class="panel">
      <div class="panel-title">כמות צ'ופסטיקס</div>
      <div class="quantity-control">
        <button id="chopsticks-minus">−</button>
        <input id="chopsticks-qty" type="number" readonly value="1">
        <button id="chopsticks-plus">+</button>
      </div>
    </section>

    <section class="panel">
      <div class="panel-title">בחר שעת איסוף</div>
      <select id="pickup-time"><option value="">בחר שעה</option></select>
      <p class="note small" id="pickup-note"></p>
    </section>

    <section class="panel">
      <div class="panel-title">הערות אישיות</div>
      <textarea id="notes" placeholder="לדוגמה: ללא גלוטן, הגעה בשער 3..."></textarea>
    </section>

    <section class="panel">
      <div class="panel-title">סיכום הזמנה</div>
      <pre id="order-summary">הזמנה ריקה — בחר רולים, רטבים ושעה להצגת הסיכום.</pre>
      <div class="actions-row" style="display:flex; gap:6px; margin-top:6px;">
        <button id="send-order" class="btn primary">שלח הזמנה</button>
        <button id="guest-btn" class="btn secondary">שלח כאורח</button>
      </div>
    </section>

    <div id="messages" aria-live="polite"></div>
  </aside>
</main>

<script>
// ================== DATA ==================
const insideOutRollsData = [
{id:"bingo",name:"רול בינגו - 50₪",description:"סלמון נא, שמנת, אבוקדו בציפוי שומשום קלוי",price:50},
{id:"luna",name:"רול לונה - 50₪",description:"ספייסי סלמון אפוי על רול בטטה, אבוקדו ושיטאקי",price:50},
{id:"belgian",name:"רול ריי - 55₪",description:"טרטר ספייסי טונה נא על רול מלפפון, עירית ואושינקו",price:55}
];
const makiRollsData = [
{id:"alfi",name:"רול אלפי - 35₪",description:"מאקי סלמון",price:35},
{id:"maymay",name:"רול מיי מיי🌱 - 25₪",description:"מאקי בטטה ואבוקדו",price:25}
];
const onigiriData = [
{id:"rocky",name:"אוניגירי רוקי - 35₪",description:"טרטר טונה אדומה עם ספייסי מיונז ובצל ירוק",price:35},
{id:"johnny",name:"אוניגירי ג׳וני - 30₪",description:"טרטר סלמון עם ספייסי מיונז ובצל ירוק",price:30}
];
const pokeData = [
{id:"dog",name:"בול-דוג - 60₪",description:"אורז סושי, סלמון במרינדה, אדממה, מלפפון, אבוקדו, בצל ירוק. מעל שומשום ורוטב ספייסי מיונז",price:60}
];
const saucesData = [
{id:"spicy-mayo",name:"ספייסי מיונז",price:3},
{id:"soy",name:"רוטב סויה",price:3}
];

// ================== STATE ==================
let selectedRolls = {}, selectedSauces={}, chopsticksCount=1;

// ================== HELPERS ==================
function $id(id){return document.getElementById(id);}
function createRollCard(item, containerId){
  const container=$id(containerId);
  const card=document.createElement('div'); card.className='roll-card'; card.dataset.id=item.id; card.dataset.price=item.price;
  const info=document.createElement('div'); info.className='info'; info.innerHTML=`<h3>${item.name}</h3><p>${item.description}</p>`;
  const controls=document.createElement('div'); controls.className='quantity-control';
  const btnMinus=document.createElement('button'); btnMinus.textContent='−';
  const inputQty=document.createElement('input'); inputQty.type='number'; inputQty.value=selectedRolls[item.id]||0; inputQty.readOnly=true;
  const btnPlus=document.createElement('button'); btnPlus.textContent='+';
  btnPlus.addEventListener('click',()=>{selectedRolls[item.id]=(selectedRolls[item.id]||0)+1; inputQty.value=selectedRolls[item.id]; updateSummary();});
  btnMinus.addEventListener('click',()=>{if((selectedRolls[item.id]||0)>0){selectedRolls[item.id]--; inputQty.value=selectedRolls[item.id]; updateSummary();}});
  controls.append(btnMinus,inputQty,btnPlus); card.append(info,controls); container.appendChild(card);
}
function createSauceCard(item){
  const container=$id('sauces-container');
  const card=document.createElement('div'); card.className='roll-card'; card.dataset.id=item.id; card.dataset.price=item.price;
  const info=document.createElement('div'); info.className='info'; info.innerHTML=`<h3>${item.name}</h3><p>2 חינם לכל רול — מעבר לכך ${item.price}₪</p>`;
  const controls=document.createElement('div'); controls.className='quantity-control';
  const btnMinus=document.createElement('button'); btnMinus.textContent='−';
  const inputQty=document.createElement('input'); inputQty.type='number'; inputQty.value=selectedSauces[item.id]||0; inputQty.readOnly=true;
  const btnPlus=document.createElement('button'); btnPlus.textContent='+';
  btnPlus.addEventListener('click',()=>{selectedSauces[item.id]=(selectedSauces[item.id]||0)+1; inputQty.value=selectedSauces[item.id]; updateSummary();});
  btnMinus.addEventListener('click',()=>{if((selectedSauces[item.id]||0)>0){selectedSauces[item.id]--; inputQty.value=selectedSauces[item.id]; updateSummary();}});
  controls.append(btnMinus,inputQty,btnPlus); card.append(info,controls); container.appendChild(card);
}
function initMenu(){
  ['insideout-rolls','maki-rolls','onigiri-rolls','poke-rolls','sauces-container'].forEach(id=>{$id(id).innerHTML='';});
  insideOutRollsData.forEach(r=>createRollCard(r,'insideout-rolls'));
  makiRollsData.forEach(r=>createRollCard(r,'maki-rolls'));
  onigiriData.forEach(r=>createRollCard(r,'onigiri-rolls'));
  pokeData.forEach(r=>createRollCard(r,'poke-rolls'));
  saucesData.forEach(s=>createSauceCard(s));
}

// ================== SUMMARY ==================
function computeSummary(){
  let total=0, totalRolls=0;
  const rollsLines=[];
  const all=[...insideOutRollsData,...makiRollsData,...onigiriData,...pokeData];
  for(const id in selectedRolls){
    const qty=selectedRolls[id]||0;
    if(qty>0){
      const item=all.find(x=>x.id===id);
      rollsLines.push(`${item.name} x${qty} — ${item.price*qty}₪`);
      total+=item.price*qty; totalRolls+=qty;
    }
  }
  let sauceLines=[], usedSaucesCount=0;
  for(const id in selectedSauces){
    const qty=selectedSauces[id]||0;
    if(qty>0){ const s=saucesData.find(x=>x.id===id); sauceLines.push(`${s.name} x${qty}`); usedSaucesCount+=qty; }
  }
  const extra=Math.max(0, usedSaucesCount-(totalRolls*2));
  total+=extra*3;
  return {rollsLines,sauceLines,totalRolls,usedSaucesCount,extra,total};
}
function updateSummary(){
  const s=computeSummary();
  let text=`הזמנה חדשה:\n\n`;
  if(s.rollsLines.length) text+=s.rollsLines.join('\n')+'\n\n'; else text+='(לא נבחרו רולים)\n\n';
  text+='רטבים:\n';
  if(s.sauceLines.length) text+=s.sauceLines.join('\n')+'\n'; else text+='(לא נבחרו רטבים)\n';
  if(s.extra>0) text+=`\nעלות רטבים נוספים: ${s.extra} × 3₪ = ${s.extra*3}₪\n`;
  text+=`\nכמות צ'ופסטיקס: ${chopsticksCount}\n`;
  const notes=$id('notes').value.trim(); if(notes) text+=`\nהערות: ${notes}\n`;
  text+=`\nסה"כ לתשלום: ${s.total}₪\n`;
  $id('order-summary').textContent=text;
}

// ================== TABS ==================
document.querySelectorAll('.tab').forEach(tab=>{
  tab.addEventListener('click',()=>{
    document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
    tab.classList.add('active');
    ['insideout-rolls','maki-rolls','onigiri-rolls','poke-rolls'].forEach(id=>{$id(id).style.display='none';});
    $id(tab.dataset.target).style.display='flex';
  });
});

// ================== CHOPSTICKS ==================
$id('chopsticks-minus').addEventListener('click',()=>{if(chopsticksCount>1) chopsticksCount--; $id('chopsticks-qty').value=chopsticksCount; updateSummary();});
$id('chopsticks-plus').addEventListener('click',()=>{chopsticksCount++; $id('chopsticks-qty').value=chopsticksCount; updateSummary();});

// ================== INIT ==================
window.addEventListener('DOMContentLoaded',()=>{
  initMenu();
  updateSummary();
  const firstTab=document.querySelectorAll('.tab')[0];
  if(firstTab) firstTab.click();
});
</script>
</body>
</html>
